
<h1>Next.js - Les Bases - Cours</h1>


<h2>La différence entre <b>Params</b> et <b>SearchParams</b></h2>

<p>La gestion de l'URL est une partie importante du développement web. Il est important de bien comprendre la différence entre les <b>Params</b> et les <b>SearchParams</b> d'une url.</p>

<p>Comme vu précédemment, nous pouvons creer une route dynamique en mettant entre <b>[]</b> le nom du dossier.</p>
<p>C'est un <b>Params</b>.</p>

<a href="/next-js/params.jpg" target="_blank">
   <img src="/next-js/params.jpg" alt="Params" />
</a>
<p>Ici <b>category</b> et <b>slug</b> sont des paramètres dynamiques que nous verrons comment récupérer grâce à la propriété <b>Params</b>.</p>
<p>Dans cet exemple si nous accédons à l'URL "/cours/html/les-bases" nous aurons 2 <b>Params</b> : "html" et "les-bases".</p>


<p>Ne pas confondre avec les <b>SearchParams</b> qui sont les paramètres qui viennent apres le <b>?</b> d'une url et sont séparés par un <b>&</b>.</p>
<p>Par exemple dans l'url "/cours/html/les-bases?search=hello nous avons 1 <b>SearchParams</b> : "search" dont la valeur est "hello".</p>

<p>Il est important de bien comprendre la différence entre les deux car ils sont utilisés de manière différente.</p>
<p>Les <b>Params</b> sont utilisés pour créer des routes dynamiques alors que les <b>SearchParams</b> sont utilisés pour filtrer des données.</p>

<p>Les <b>Params</b> sont injectés dans les <b>Layout</b> et <b>Pages</b> des <b>Server Components</b> tandis que les <b>SearchParams</b> UNIQUEMENT dans les <b>Pages</b>.</p>
<p>Pour les récuperer dans le composant, il suffit de déstructuré l'un ou l'autre des <b>props</b> de la <b>Page</b> ou du <b>Layout</b></p>

<p>Exemple de récupération d'un <b>Params</b> en <b>Typescript</b> avec un petit aperçu d'une requête <b>Prisma</b> :</p>

```tsx
type CoursePageProps = {
    params: {
        category: string
        slug: string
    }
}
export default async function Page({params} : CoursePageProps) {
    const course = await prisma.course.findFirst({
        where: {
            category: params.category,
            slug: params.slug,
        }
    });
 }
```

<p>Le <b>type</b> des <b>SearchParams</b> est un peu différent, car il peut être un tableau :</p>
```tsx
type PageProps = { searchParams: { [key: string]: string | undefined } }
```

<p>Dans un <b>Client Component</b>, il faudra récupérer les <b>Params</b> et <b>SearchParams</b> à l'aide des hooks <b>useParams</b> et <b>useSearchParams</b>.</p>



<h2>Les requêtes vers la base de donnée et <b>Prisma</b></h2>
<p>Les requêtes vers une base de donnée peuvent être complexe. <b>Prisma</b> est un <b>ORM</b> (Object Relational Mapping) qui nous aide à effectuer nos requêtes <b>SQL</b>, cependant il est important de connaître le fonctionnement d'une base de données ainsi que le langage <b>SQL</b>.</p>

<p>Pour utiliser <b>Prisma</b>, il faut d'abord l'ajouter au projet :</p>
```bash
npm install prisma
npx prisma init --datasource-provider sqlite
```
<p>Cela va installer <b>Prisma</b>, créer un fichier <b>.env</b> si celui-ci n'existe pas pour lui ajouter une variable <b>DATABASE_URL</b> et créer un fichier <b>schema.prisma</b> dans un dossier <b>prisma</b> à la racine du projet.</p>
<p>Pour plus de simplicité, nous ajoutons <b>--datasource-provider sqlite</b> pour préciser que nous voulons utiliser une base de donnée <b>SQLite</b>, mais changer d'SGBD est plutôt simple.</p>



```prisma
model Course {
    id: Int
    title: String
    category: String
    slug: String
}
```
